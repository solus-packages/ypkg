From eed813fff1d2bd5be5cb21746520a79580ccca63 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Tue, 21 Nov 2017 04:18:09 +0000
Subject: [PATCH 1/5] rc: Fix busted python macros

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 ypkg2/rc.yml | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

diff --git a/ypkg2/rc.yml b/ypkg2/rc.yml
index 05d8611..4aaecf8 100644
--- a/ypkg2/rc.yml
+++ b/ypkg2/rc.yml
@@ -103,9 +103,9 @@ actions:
         perl_install
     - python_setup: |
         function python_setup() {
-            instdir=`basename %installroot%`
+            instdir=`basename $workdir`
             pushd ..
-                cp -a instdir py2build && pushd py2build
+                cp -a $instdir py2build && pushd py2build
                     python2.7 setup.py build $* || exit
                 popd
             popd
@@ -113,10 +113,10 @@ actions:
         python_setup
     - python_install: |
         function python_install() {
-            instdir=`basename %installroot%`
+            instdir=`basename $workdir`
             pushd ..
                 if [[ ! -d py2build ]]; then
-                    cp -a instdir py2build
+                    cp -a $instdir py2build
                 fi
                 pushd py2build
                     python2.7 setup.py install --root="%installroot%" $* || exit
@@ -126,9 +126,9 @@ actions:
         python_install
     - python3_setup: |
         function python3_setup() {
-            instdir=`basename %installroot%`
+            instdir=`basename $workdir`
             pushd ..
-                cp -a instdir py3build && pushd py3build
+                cp -a $instdir py3build && pushd py3build
                     python3 setup.py build $* || exit
                 popd
             popd
@@ -136,10 +136,10 @@ actions:
         python3_setup
     - python3_install: |
         function python3_install() {
-            instdir=`basename %installroot%`
+            instdir=`basename $workdir`
             pushd ..
                 if [[ ! -d py3build ]]; then
-                    cp -a instdir py3build
+                    cp -a $instdir py3build
                 fi
                 pushd py3build
                     python3 setup.py install --root="%installroot%" $* || exit
-- 
2.15.0

