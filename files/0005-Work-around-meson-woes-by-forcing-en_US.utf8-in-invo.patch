From 1164a49d4afe5c4cbbba157be70deafc7f21d651 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sun, 8 Oct 2017 16:43:51 +0100
Subject: [PATCH 5/5] Work around meson woes by forcing en_US.utf8 in
 invocation of macros

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 ypkg2/rc.yml | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/ypkg2/rc.yml b/ypkg2/rc.yml
index 761e39e..f5651c1 100644
--- a/ypkg2/rc.yml
+++ b/ypkg2/rc.yml
@@ -16,11 +16,11 @@ actions:
         -DCMAKE_LD_FLAGS="%LDFLAGS%" -DCMAKE_LIB_SUFFIX="%LIBSUFFIX%" \
         -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_INSTALL_PREFIX=%PREFIX%
     - meson_configure: |
-        CFLAGS="%CFLAGS%" CXXFLAGS="%CXXFLAGS%" LDFLAGS="%LDFLAGS%" meson --prefix %PREFIX% --buildtype=plain --libdir="lib%LIBSUFFIX%" --libexecdir="lib%LIBSUFFIX%/%PKGNAME%" --sysconfdir=/etc --localstatedir=/var solusBuildDir
+        LC_ALL=en_US.utf8 CFLAGS="%CFLAGS%" CXXFLAGS="%CXXFLAGS%" LDFLAGS="%LDFLAGS%" meson --prefix %PREFIX% --buildtype=plain --libdir="lib%LIBSUFFIX%" --libexecdir="lib%LIBSUFFIX%/%PKGNAME%" --sysconfdir=/etc --localstatedir=/var solusBuildDir
     - meson_build: |
-        ninja %JOBS% -C solusBuildDir
+        LC_ALL=en_US.utf8 ninja %JOBS% -C solusBuildDir
     - meson_install: |
-        DESTDIR="%installroot%" ninja install %JOBS% -C solusBuildDir
+        LC_ALL=en_US.utf8 DESTDIR="%installroot%" ninja install %JOBS% -C solusBuildDir
     - qmake: |
         qmake QMAKE_CFLAGS_RELEASE="%CFLAGS%" QMAKE_CXXFLAGS_RELEASE="%CXXFLAGS%" QMAKE_LFLAGS="%LDFLAGS%"
     - qmake4: |
-- 
2.14.2

