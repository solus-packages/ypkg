From db5d21ca3ba9d93be108b29adc9efe160e79d375 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Wed, 22 Nov 2017 20:02:56 +0000
Subject: [PATCH 4/4] rc: Try using new PKG_BUILD_DIR variables

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 ypkg2/rc.yml | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

diff --git a/ypkg2/rc.yml b/ypkg2/rc.yml
index 0394ffb..3348c6d 100644
--- a/ypkg2/rc.yml
+++ b/ypkg2/rc.yml
@@ -103,10 +103,10 @@ actions:
         perl_install
     - python_setup: |
         function python_setup() {
-            if [[ -e $sources/.workdir ]]; then
-                cd $(cat $sources/.workdir)
+            if [[ -e $PKG_BUILD_DIR/.workdir ]]; then
+                cd $(cat $PKG_BUILD_DIR/.workdir)
             else
-                echo $workdir > $sources/.workdir
+                echo $workdir > $PKG_BUILD_DIR/.workdir
             fi
 
             instdir=`basename $PWD`
@@ -119,10 +119,10 @@ actions:
         python_setup
     - python_install: |
         function python_install() {
-            if [[ -e $sources/.workdir ]]; then
-                cd $(cat $sources/.workdir)
+            if [[ -e $PKG_BUILD_DIR/.workdir ]]; then
+                cd $(cat $PKG_BUILD_DIR/.workdir)
             else
-                echo $workdir > $sources/.workdir
+                echo $workdir > $PKG_BUILD_DIR/.workdir
             fi
 
             instdir=`basename $PWD`
@@ -138,10 +138,10 @@ actions:
         python_install
     - python3_setup: |
         function python3_setup() {
-            if [[ -e $sources/.workdir ]]; then
-                cd $(cat $sources/.workdir)
+            if [[ -e $PKG_BUILD_DIR/.workdir ]]; then
+                cd $(cat $PKG_BUILD_DIR/.workdir)
             else
-                echo $workdir > $sources/.workdir
+                echo $workdir > $PKG_BUILD_DIR/.workdir
             fi
 
             instdir=`basename $PWD`
@@ -154,10 +154,10 @@ actions:
         python3_setup
     - python3_install: |
         function python3_install() {
-            if [[ -e $sources/.workdir ]]; then
-                cd $(cat $sources/.workdir)
+            if [[ -e $PKG_BUILD_DIR/.workdir ]]; then
+                cd $(cat $PKG_BUILD_DIR/.workdir)
             else
-                echo $workdir > $sources/.workdir
+                echo $workdir > $PKG_BUILD_DIR/.workdir
             fi
 
             instdir=`basename $PWD`
-- 
2.15.0

