From e947cb0c9a5ed4e50c169d25d681f47d26098798 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sun, 5 Mar 2017 21:57:26 +0000
Subject: [PATCH 2/2] rc: Explicitly set a build dir for meson

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 ypkg2/rc.yml | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/ypkg2/rc.yml b/ypkg2/rc.yml
index 39e9c3d..40f5394 100644
--- a/ypkg2/rc.yml
+++ b/ypkg2/rc.yml
@@ -15,13 +15,12 @@ actions:
         cmake -DCMAKE_CFLAGS="%CFLAGS%" -DCMAKE_CXX_FLAGS="%CXXFLAGS%" \
         -DCMAKE_LD_FLAGS="%LDFLAGS%" -DCMAKE_LIB_SUFFIX="%LIBSUFFIX%" \
         -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCMAKE_INSTALL_PREFIX=%PREFIX%
-    # Example: %meson_configure ..
     - meson_configure: |
-        CFLAGS="%CFLAGS%" CXXFLAGS="%CXXFLAGS%" LDFLAGS="%LDFLAGS%" meson --prefix %PREFIX% --buildtype=plain --libdir="lib%LIBSUFFIX%" --libexecdir="lib%LIBSUFFIX%/%PKGNAME%" --sysconfdir=/etc --localstatedir=/var
+        CFLAGS="%CFLAGS%" CXXFLAGS="%CXXFLAGS%" LDFLAGS="%LDFLAGS%" meson --prefix %PREFIX% --buildtype=plain --libdir="lib%LIBSUFFIX%" --libexecdir="lib%LIBSUFFIX%/%PKGNAME%" --sysconfdir=/etc --localstatedir=/var solusBuildDir
     - meson_build: |
-        ninja %JOBS%
+        ninja %JOBS% -C solusBuildDir
     - meson_install: |
-        DESTDIR="%installroot%" ninja install %JOBS%
+        DESTDIR="%installroot%" ninja install %JOBS% -C solusBuildDir
     - qmake: |
         qmake QMAKE_CFLAGS_RELEASE="%CFLAGS%" QMAKE_CXXFLAGS_RELEASE="%CXXFLAGS%" QMAKE_LFLAGS="%LDFLAGS%"
     - qmake4: |
-- 
2.12.2

