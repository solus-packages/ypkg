From 735c339ee3edb1d5f90e74ecd55523a21c15e201 Mon Sep 17 00:00:00 2001
From: Pierre-Yves <pyu@riseup.net>
Date: Sun, 7 Apr 2019 14:32:20 +0200
Subject: [PATCH] Teach qml_cache macro how to handle spaces

Signed-off-by: Pierre-Yves <pyu@riseup.net>
---
 ypkg2/rc.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/ypkg2/rc.yml b/ypkg2/rc.yml
index 638527c..bf91d2c 100644
--- a/ypkg2/rc.yml
+++ b/ypkg2/rc.yml
@@ -44,7 +44,7 @@ actions:
     - qml_cache: |
         function generate_cache() {
             pushd $installdir
-            for i in `find -type f -name "*.qml"`; do
+            find . -type f -name "*.qml" -print0 | while IFS= read -r -d '' i; do
                 if ! [ -a "${i}"c ]; then
                     qmlcachegen -o "${i}"c "${i}" $*
                 fi
