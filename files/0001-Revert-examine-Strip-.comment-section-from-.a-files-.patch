From 71d23bcec61d0896ea71781d5f7ccbddbdca40b2 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Tue, 28 Feb 2017 20:01:41 +0000
Subject: [PATCH 1/3] Revert "examine: Strip .comment section from .a files
 universally"

This reverts commit 4ac22fb500c3c6c594d6a39aac65c3132d3f8a02. It also
fixes #29.
---
 ypkg2/examine.py | 7 -------
 1 file changed, 7 deletions(-)

diff --git a/ypkg2/examine.py b/ypkg2/examine.py
index 9cd11a2..d29d2f0 100644
--- a/ypkg2/examine.py
+++ b/ypkg2/examine.py
@@ -217,9 +217,6 @@ def strip_file(context, pretty, file, magic_string, mode=None):
             "RANLIB=\"gcc-ranlib\"",
             "NM=\"gcc-nm\""])
 
-    # Strip .comment too
-    strip_comment = False
-
     cmd = "{} strip {} \"{}\""
     flags = ""
     if mode == "shared":
@@ -228,14 +225,10 @@ def strip_file(context, pretty, file, magic_string, mode=None):
         flags = "-g --strip-unneeded"
     elif mode == "ar":
         flags = "--strip-debug"
-        strip_comment = True
     try:
         s = " ".join(exports)
         subprocess.check_call(cmd.format(s, flags, file), shell=True)
         console_ui.emit_info("Stripped", pretty)
-        if strip_comment:
-            decom = cmd.format(s, "-R .comment", file)
-            subprocess.check_call(decom, shell=True)
     except Exception as e:
         console_ui.emit_warning("Strip", "Failed to strip '{}'".
                                 format(pretty))
-- 
2.12.2

